<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Attendance Schedule Mock</title>
  <style>
    :root {
      --bg: #f6f7f9;
      --panel: #ffffff;
      --line: #cfd4da;
      --line-strong: #aeb5bd;
      --text: #1f2430;
      --muted: #5f6b7a;
      --brand: #2f6fd6;
      --success: #1d7a45;
      --warn: #9a5b06;
      --danger: #b32d2e;
      --shadow: 0 6px 20px rgba(20, 26, 36, 0.08);
      --radius: 12px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Segoe UI", "Noto Sans", sans-serif;
      background: linear-gradient(180deg, #f7f8fb 0%, #eef2f7 100%);
      color: var(--text);
    }

    .page {
      max-width: 1180px;
      margin: 20px auto 36px;
      padding: 0 16px;
    }

    .shell {
      background: var(--panel);
      border: 1px solid #dde2e8;
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .topbar {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 16px;
      align-items: center;
      padding: 16px 18px;
      border-bottom: 1px solid #e5e9ef;
      background: #fbfcfe;
    }

    .titleblock h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.01em;
    }

    .titleblock p {
      margin: 4px 0 0;
      font-size: 13px;
      color: var(--muted);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-left: 8px;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      color: #0f5132;
      background: #d9f3e4;
      border: 1px solid #b5e6cb;
    }

    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      padding: 14px 18px;
      border-bottom: 1px solid #e5e9ef;
      background: #fff;
    }

    .field {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border: 1px solid var(--line);
      border-radius: 10px;
      background: #fff;
      min-height: 40px;
    }

    .field label {
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
    }

    .field input,
    .field select {
      border: 0;
      outline: 0;
      background: transparent;
      font-size: 14px;
      min-width: 120px;
      color: var(--text);
    }

    .actions {
      margin-left: auto;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    button {
      border: 1px solid var(--line);
      background: #fff;
      color: var(--text);
      padding: 9px 14px;
      min-height: 40px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color .15s ease, border-color .15s ease, transform .05s ease;
    }

    button:hover { background: #f8fafc; border-color: #bcc5cf; }
    button:active { transform: translateY(1px); }
    button.primary { background: #2f6fd6; border-color: #2b64c0; color: #fff; }
    button.primary:hover { background: #2b64c0; }
    button.warn { background: #fff7e8; border-color: #ebcd95; color: #8a5607; }
    button.ghost { background: #f6f8fb; }

    .content {
      display: grid;
      grid-template-columns: minmax(0, 1fr) 300px;
      gap: 14px;
      padding: 14px;
      background: #f7f9fc;
    }

    .gridwrap {
      background: #fff;
      border: 1px solid #dde2e8;
      border-radius: 12px;
      overflow: hidden;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }

    th, td {
      border: 1px solid var(--line);
      padding: 8px;
      vertical-align: top;
      background: #fff;
    }

    thead th {
      background: #f0f3f8;
      text-align: center;
      font-size: 14px;
      font-weight: 700;
      color: #232a33;
      height: 64px;
    }

    .day-cell {
      min-height: 110px;
      display: grid;
      gap: 6px;
      align-content: start;
    }

    .mini-label {
      font-size: 11px;
      color: var(--muted);
    }

    .day-cell select,
    .day-cell input {
      width: 100%;
      border: 1px solid #cfd6de;
      border-radius: 8px;
      min-height: 34px;
      padding: 6px 8px;
      font-size: 13px;
      background: #fff;
      color: var(--text);
    }

    .day-cell input[type="number"] { text-align: right; }
    .day-cell input[type="time"] { padding-right: 4px; }

    .sidebar {
      display: grid;
      gap: 14px;
      align-content: start;
    }

    .panel {
      background: #fff;
      border: 1px solid #dde2e8;
      border-radius: 12px;
      padding: 14px;
    }

    .panel h2 {
      margin: 0 0 10px;
      font-size: 16px;
    }

    .rows {
      display: grid;
      gap: 8px;
      font-size: 13px;
    }

    .row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      align-items: center;
    }

    .row .label { color: var(--muted); }
    .row .value { font-weight: 600; }

    #confirm-panel[hidden] { display: none; }

    #summary-status {
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #d7dee6;
      background: #f7f9fc;
      font-size: 13px;
      font-weight: 600;
    }

    #summary-status[data-state="saved"] {
      background: #eaf8ef;
      border-color: #bfe4ca;
      color: var(--success);
    }

    #summary-status[data-state="submitted"] {
      background: #e8f0ff;
      border-color: #bfd0fb;
      color: #2459b8;
    }

    #summary-status[data-state="draft"] {
      background: #fff7e8;
      border-color: #ebd09a;
      color: var(--warn);
    }

    #summary-status[data-state="error"] {
      background: #ffecee;
      border-color: #f5bfc5;
      color: var(--danger);
    }

    .notes textarea {
      width: 100%;
      min-height: 110px;
      resize: vertical;
      border: 1px solid #cfd6de;
      border-radius: 10px;
      padding: 10px;
      font: inherit;
    }

    #toast {
      position: fixed;
      right: 18px;
      bottom: 18px;
      min-width: 240px;
      max-width: 360px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid #c7d4ea;
      background: #f4f8ff;
      color: #294f98;
      box-shadow: 0 8px 24px rgba(28, 42, 65, 0.12);
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
      transition: opacity .18s ease, transform .18s ease;
      font-size: 13px;
      font-weight: 600;
      z-index: 1000;
    }

    #toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    .helper {
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
    }

    code {
      background: #f1f4f8;
      border: 1px solid #dbe2ea;
      border-radius: 6px;
      padding: 1px 5px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 12px;
    }

    @media (max-width: 980px) {
      .content {
        grid-template-columns: 1fr;
      }
      .actions {
        margin-left: 0;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="shell">
      <div class="topbar">
        <div class="titleblock">
          <h1>Attendance Schedule <span class="badge">Mock</span></h1>
          <p>Flow test page for form fill, save, submit, and confirmation steps.</p>
        </div>
        <div class="helper">
          Common selectors: <code>#save-button</code> <code>#submit-button</code> <code>#confirm-panel</code>
        </div>
      </div>

      <div class="toolbar">
        <div class="field">
          <label for="employee-select">Employee</label>
          <select id="employee-select">
            <option value="u001">Tanaka Taro (U001)</option>
            <option value="u002">Sato Hanako (U002)</option>
            <option value="u003">Suzuki Ken (U003)</option>
          </select>
        </div>
        <div class="field">
          <label for="week-start-date">Week Start</label>
          <input id="week-start-date" type="date" value="2026-02-16">
        </div>
        <div class="actions">
          <button id="prev-week-button" type="button" class="ghost">Prev Week</button>
          <button id="next-week-button" type="button" class="ghost">Next Week</button>
          <button id="apply-template-button" type="button">Apply Template</button>
          <button id="clear-week-button" type="button" class="warn">Clear</button>
          <button id="save-button" type="button">Save</button>
          <button id="submit-button" type="button" class="primary">Submit</button>
        </div>
      </div>

      <div class="content">
        <div class="gridwrap">
          <table aria-label="Weekly attendance grid">
            <thead>
              <tr>
                <th id="head-mon">Mon<br><span class="mini-label">16</span></th>
                <th id="head-tue">Tue<br><span class="mini-label">17</span></th>
                <th id="head-wed">Wed<br><span class="mini-label">18</span></th>
                <th id="head-thu">Thu<br><span class="mini-label">19</span></th>
                <th id="head-fri">Fri<br><span class="mini-label">20</span></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <div class="day-cell">
                    <div class="mini-label">Shift</div>
                    <select id="shift-mon" data-day="mon" class="shift-input">
                      <option value="">-- Select --</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="10">10</option>
                      <option value="OFF">OFF</option>
                    </select>
                    <div class="mini-label">Hours</div>
                    <input id="hours-mon" data-day="mon" class="hours-input" type="number" min="0" max="24" step="0.5" value="8.5">
                    <div class="mini-label">Start / End</div>
                    <input id="start-mon" data-day="mon" class="start-input" type="time" value="09:00">
                    <input id="end-mon" data-day="mon" class="end-input" type="time" value="18:00">
                    <input id="note-mon" data-day="mon" class="note-input" type="text" placeholder="Note">
                  </div>
                </td>
                <td>
                  <div class="day-cell">
                    <div class="mini-label">Shift</div>
                    <select id="shift-tue" data-day="tue" class="shift-input">
                      <option value="">-- Select --</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="10">10</option>
                      <option value="OFF">OFF</option>
                    </select>
                    <div class="mini-label">Hours</div>
                    <input id="hours-tue" data-day="tue" class="hours-input" type="number" min="0" max="24" step="0.5" value="0">
                    <div class="mini-label">Start / End</div>
                    <input id="start-tue" data-day="tue" class="start-input" type="time" value="">
                    <input id="end-tue" data-day="tue" class="end-input" type="time" value="">
                    <input id="note-tue" data-day="tue" class="note-input" type="text" placeholder="Note">
                  </div>
                </td>
                <td>
                  <div class="day-cell">
                    <div class="mini-label">Shift</div>
                    <select id="shift-wed" data-day="wed" class="shift-input">
                      <option value="">-- Select --</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="10">10</option>
                      <option value="OFF">OFF</option>
                    </select>
                    <div class="mini-label">Hours</div>
                    <input id="hours-wed" data-day="wed" class="hours-input" type="number" min="0" max="24" step="0.5" value="0">
                    <div class="mini-label">Start / End</div>
                    <input id="start-wed" data-day="wed" class="start-input" type="time" value="">
                    <input id="end-wed" data-day="wed" class="end-input" type="time" value="">
                    <input id="note-wed" data-day="wed" class="note-input" type="text" placeholder="Note">
                  </div>
                </td>
                <td>
                  <div class="day-cell">
                    <div class="mini-label">Shift</div>
                    <select id="shift-thu" data-day="thu" class="shift-input">
                      <option value="">-- Select --</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="10">10</option>
                      <option value="OFF">OFF</option>
                    </select>
                    <div class="mini-label">Hours</div>
                    <input id="hours-thu" data-day="thu" class="hours-input" type="number" min="0" max="24" step="0.5" value="0">
                    <div class="mini-label">Start / End</div>
                    <input id="start-thu" data-day="thu" class="start-input" type="time" value="">
                    <input id="end-thu" data-day="thu" class="end-input" type="time" value="">
                    <input id="note-thu" data-day="thu" class="note-input" type="text" placeholder="Note">
                  </div>
                </td>
                <td>
                  <div class="day-cell">
                    <div class="mini-label">Shift</div>
                    <select id="shift-fri" data-day="fri" class="shift-input">
                      <option value="">-- Select --</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="10">10</option>
                      <option value="OFF">OFF</option>
                    </select>
                    <div class="mini-label">Hours</div>
                    <input id="hours-fri" data-day="fri" class="hours-input" type="number" min="0" max="24" step="0.5" value="0">
                    <div class="mini-label">Start / End</div>
                    <input id="start-fri" data-day="fri" class="start-input" type="time" value="">
                    <input id="end-fri" data-day="fri" class="end-input" type="time" value="">
                    <input id="note-fri" data-day="fri" class="note-input" type="text" placeholder="Note">
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="sidebar">
          <div class="panel">
            <h2>Summary</h2>
            <div class="rows">
              <div class="row"><span class="label">Employee</span><span id="summary-employee" class="value">Tanaka Taro</span></div>
              <div class="row"><span class="label">Week</span><span id="summary-week" class="value">2026-02-16</span></div>
              <div class="row"><span class="label">Work Days</span><span id="work-days" class="value">1</span></div>
              <div class="row"><span class="label">Total Hours</span><span id="total-hours" class="value">8.5</span></div>
              <div class="row"><span class="label">Submit Flag</span><span id="submit-flag" class="value">Draft</span></div>
            </div>
            <div id="summary-status" data-state="draft">Draft changes not submitted.</div>
          </div>

          <div class="panel">
            <h2>Actions</h2>
            <div class="rows">
              <button id="open-confirm-panel-button" type="button">Open Confirm Panel</button>
              <button id="close-confirm-panel-button" type="button" class="ghost">Close Confirm Panel</button>
            </div>
            <div id="confirm-panel" hidden>
              <hr style="border:none;border-top:1px solid #e2e8f0;margin:12px 0;">
              <div class="rows">
                <div class="row"><span class="label">Check</span><span class="value" id="confirm-check">Waiting</span></div>
                <div class="row"><span class="label">Message</span><span class="value" id="confirm-message">Panel opened.</span></div>
              </div>
            </div>
          </div>

          <div class="panel notes">
            <h2>Manager Note</h2>
            <textarea id="manager-note" placeholder="Write note for approval flow..."></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" role="status" aria-live="polite"></div>

  <script>
    (function () {
      const days = ["mon", "tue", "wed", "thu", "fri"];
      const dayLabels = ["Mon", "Tue", "Wed", "Thu", "Fri"];
      const statusEl = document.getElementById("summary-status");
      const toastEl = document.getElementById("toast");
      const totalHoursEl = document.getElementById("total-hours");
      const workDaysEl = document.getElementById("work-days");
      const submitFlagEl = document.getElementById("submit-flag");
      const summaryEmployeeEl = document.getElementById("summary-employee");
      const summaryWeekEl = document.getElementById("summary-week");
      const employeeSelectEl = document.getElementById("employee-select");
      const weekStartEl = document.getElementById("week-start-date");
      const confirmPanelEl = document.getElementById("confirm-panel");
      const confirmCheckEl = document.getElementById("confirm-check");
      const confirmMessageEl = document.getElementById("confirm-message");
      let toastTimer = null;
      let lastSavedAt = null;

      function byId(id) {
        return document.getElementById(id);
      }

      function showToast(message) {
        if (!toastEl) return;
        toastEl.textContent = message;
        toastEl.classList.add("show");
        if (toastTimer) {
          window.clearTimeout(toastTimer);
        }
        toastTimer = window.setTimeout(function () {
          toastEl.classList.remove("show");
        }, 1800);
      }

      function updateHeadersFromDate() {
        const raw = weekStartEl.value;
        if (!raw) {
          return;
        }
        summaryWeekEl.textContent = raw;
        const date = new Date(raw + "T00:00:00");
        if (Number.isNaN(date.getTime())) {
          return;
        }
        for (let i = 0; i < days.length; i += 1) {
          const next = new Date(date);
          next.setDate(date.getDate() + i);
          const head = byId("head-" + days[i]);
          if (!head) continue;
          const month = String(next.getMonth() + 1).padStart(2, "0");
          const day = String(next.getDate()).padStart(2, "0");
          head.innerHTML = dayLabels[i] + "<br><span class=\"mini-label\">" + month + "/" + day + "</span>";
        }
      }

      function parseHours(input) {
        const n = Number(input && input.value ? input.value : 0);
        return Number.isFinite(n) ? n : 0;
      }

      function recalcTotals() {
        let total = 0;
        let workDays = 0;
        days.forEach(function (day) {
          const hoursInput = byId("hours-" + day);
          const shiftInput = byId("shift-" + day);
          const hours = parseHours(hoursInput);
          if (hours > 0) {
            total += hours;
          }
          const shift = shiftInput ? shiftInput.value : "";
          if ((shift && shift !== "OFF") || hours > 0) {
            workDays += 1;
          }
        });
        totalHoursEl.textContent = total.toFixed(1);
        workDaysEl.textContent = String(workDays);
      }

      function markDraft(message) {
        statusEl.dataset.state = "draft";
        statusEl.textContent = message || "Draft changes not submitted.";
        submitFlagEl.textContent = "Draft";
      }

      function setStatus(state, message) {
        statusEl.dataset.state = state;
        statusEl.textContent = message;
        if (state === "submitted") {
          submitFlagEl.textContent = "Submitted";
        } else if (state === "saved") {
          submitFlagEl.textContent = "Saved";
        }
      }

      function applyShiftPreset(day, shiftCode) {
        const shiftEl = byId("shift-" + day);
        const hoursEl = byId("hours-" + day);
        const startEl = byId("start-" + day);
        const endEl = byId("end-" + day);
        if (!shiftEl || !hoursEl || !startEl || !endEl) return;

        shiftEl.value = shiftCode;
        if (shiftCode === "OFF") {
          hoursEl.value = "0";
          startEl.value = "";
          endEl.value = "";
          return;
        }
        if (shiftCode === "01") {
          hoursEl.value = "8.5";
          startEl.value = "09:00";
          endEl.value = "18:00";
          return;
        }
        if (shiftCode === "02") {
          hoursEl.value = "8.0";
          startEl.value = "10:00";
          endEl.value = "19:00";
          return;
        }
        if (shiftCode === "03") {
          hoursEl.value = "7.5";
          startEl.value = "08:30";
          endEl.value = "17:00";
          return;
        }
        if (shiftCode === "10") {
          hoursEl.value = "6.0";
          startEl.value = "13:00";
          endEl.value = "20:00";
        }
      }

      function applyTemplate() {
        ["mon", "tue", "wed", "thu", "fri"].forEach(function (day, index) {
          applyShiftPreset(day, index < 4 ? "01" : "OFF");
          const noteEl = byId("note-" + day);
          if (noteEl) noteEl.value = "";
        });
        recalcTotals();
        markDraft("Template applied. Review and save.");
        showToast("Template applied");
      }

      function clearWeek() {
        days.forEach(function (day) {
          const fields = [
            "shift-" + day,
            "hours-" + day,
            "start-" + day,
            "end-" + day,
            "note-" + day
          ];
          fields.forEach(function (id) {
            const el = byId(id);
            if (!el) return;
            if (id.indexOf("hours-") === 0) {
              el.value = "0";
            } else {
              el.value = "";
            }
          });
        });
        recalcTotals();
        markDraft("Week cleared. Fill values and save.");
        showToast("Week cleared");
      }

      function fakeAsync(delayMs, callback) {
        window.setTimeout(callback, delayMs);
      }

      function saveSchedule() {
        setStatus("draft", "Saving...");
        showToast("Saving schedule...");
        fakeAsync(700, function () {
          lastSavedAt = new Date();
          setStatus("saved", "Saved successfully at " + lastSavedAt.toLocaleTimeString());
          showToast("Saved");
          confirmCheckEl.textContent = "Saved";
          confirmMessageEl.textContent = "Data is ready for submission.";
        });
      }

      function submitSchedule() {
        if (!lastSavedAt) {
          setStatus("error", "Please save before submit.");
          showToast("Save first");
          return;
        }
        setStatus("draft", "Submitting...");
        showToast("Submitting...");
        fakeAsync(1200, function () {
          setStatus("submitted", "Submitted for approval.");
          showToast("Submitted");
          confirmCheckEl.textContent = "Submitted";
          confirmMessageEl.textContent = "Approval request sent.";
          confirmPanelEl.hidden = false;
        });
      }

      function shiftWeek(daysDelta) {
        const raw = weekStartEl.value;
        const base = raw ? new Date(raw + "T00:00:00") : new Date();
        if (Number.isNaN(base.getTime())) {
          return;
        }
        base.setDate(base.getDate() + daysDelta);
        const yyyy = String(base.getFullYear());
        const mm = String(base.getMonth() + 1).padStart(2, "0");
        const dd = String(base.getDate()).padStart(2, "0");
        weekStartEl.value = yyyy + "-" + mm + "-" + dd;
        updateHeadersFromDate();
        markDraft("Week changed. Data may need update.");
      }

      function bindInputs() {
        days.forEach(function (day) {
          const shiftEl = byId("shift-" + day);
          const hoursEl = byId("hours-" + day);
          const startEl = byId("start-" + day);
          const endEl = byId("end-" + day);
          const noteEl = byId("note-" + day);
          if (shiftEl) {
            shiftEl.addEventListener("change", function () {
              if (shiftEl.value) {
                applyShiftPreset(day, shiftEl.value);
              }
              recalcTotals();
              markDraft();
            });
          }
          [hoursEl, startEl, endEl, noteEl].forEach(function (el) {
            if (!el) return;
            el.addEventListener("input", function () {
              recalcTotals();
              markDraft();
            });
          });
        });

        employeeSelectEl.addEventListener("change", function () {
          const selected = employeeSelectEl.options[employeeSelectEl.selectedIndex];
          summaryEmployeeEl.textContent = selected ? selected.textContent.split(" (")[0] : "";
          markDraft("Employee changed.");
        });

        weekStartEl.addEventListener("change", function () {
          updateHeadersFromDate();
          markDraft("Week start changed.");
        });
      }

      function bindButtons() {
        byId("prev-week-button").addEventListener("click", function () { shiftWeek(-7); });
        byId("next-week-button").addEventListener("click", function () { shiftWeek(7); });
        byId("apply-template-button").addEventListener("click", applyTemplate);
        byId("clear-week-button").addEventListener("click", clearWeek);
        byId("save-button").addEventListener("click", saveSchedule);
        byId("submit-button").addEventListener("click", submitSchedule);
        byId("open-confirm-panel-button").addEventListener("click", function () {
          confirmPanelEl.hidden = false;
          confirmCheckEl.textContent = "Open";
          confirmMessageEl.textContent = "Panel opened manually.";
        });
        byId("close-confirm-panel-button").addEventListener("click", function () {
          confirmPanelEl.hidden = true;
        });
      }

      function init() {
        updateHeadersFromDate();
        bindInputs();
        bindButtons();
        recalcTotals();
        markDraft("Draft changes not submitted.");
        const selected = employeeSelectEl.options[employeeSelectEl.selectedIndex];
        summaryEmployeeEl.textContent = selected ? selected.textContent.split(" (")[0] : "";
      }

      init();
    })();
  </script>
</body>
</html>
